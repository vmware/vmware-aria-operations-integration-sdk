Management Pack Initialization Tool
-----------------------------------

## Purpose

The mp-init tool generates a template project that contains all the requirements to develop a Management Pack with a
containerized adapter for vRealize Operations. To build a Management Pack, use the [build tool](mp-build.md). When
calling `mp-init`, the user will be prompted with a series of questions. The script will use these questions to generate
an initial project structure and create classifiers that other tools and vROps will use.

## Prerequisites
- [vROps implementation SDK](../README.md#installation)

## Input

### Command-line Arguments
`mp-init` does not have any command-line arguments

### Interactive Prompts
When using the `mp-init` script, it is helpful to know what technology the Management will monitor.
For example, in the case of [NXL ALB AVI](https://gitlab.eng.vmware.com/cmbu-tvg/nxl-alb-avi-mp), a  management pack built using the vROps Integration SDK tools,
the `mp-init` process would look something like this:

```
Enter a path for the project (where code for collection, metadata, and content reside): test
Management pack display name: NSX ALB (Avi)
Management pack adapter key: NSXALBAdapter
Management pack description: This Management pack is a proof of concept for the Open SDK project
Management pack vendor: TVS Team
Enter a path to a EULA text file, or leave blank for no EULA:
A EULA can be added later by editing the default 'eula.txt' file.
Enter a path to the management pack icon file, or leave blank for no icon:
An icon can be added later by setting the 'pak_icon' key in 'manifest.txt' to the icon file name and adding the icon file to the root project directory.
Select a language for the adapter. ['Python']
generating project structure
generating Dockerfile
generating commands file


project generation completed
```

while some prompts have optional input, each input serves a specific purpose in the project:

- Enter a path for the project (where code for collection, metadata, and content reside):
  - The _project directory_ where the mp-init tool can generate a project. The project contains a sample adapter, content directories, and metadata. If the project directory does not exist, it will be created.
- Management pack display name:
  - vRealize Operations Manager uses the _display name_ as the name of the Management Pack generated by this project. The name should include the name of the technology the Management Pack monitors.
- Management pack adapter key:
  - The _adapter key_ is used internally to identify the Management Pack and Adapter. It should be unique and cannot contain spaces or other special characters. It also cannot start with a number. By default, it is set to the Display Name with special characters removed (if the Display Name begins with a number, 'Adapter' is prepended).
- Management pack description:
  - A brief _description_ of the Management Pack and the technology it monitors. The description should include relevant versions of the monitored technology.
- Management pack vendor:
  - The name of the vendor/developer of the Management Pack. vRealize Operations Manager will display this information during the installation of the  Management Pack generated by this project.
- Enter a path to a EULA text file, or leave blank for no EULA:
  - The End-User License Agreement (EULA) is a text file that provides guidelines for distributing and using the Management Pack generated by this project. It is generally only necessary for Management Packs that will be distributed. The content of this file appears in vRealize Operations Manager during the installation of this management pack.
- Enter a path to the management pack icon file, or leave blank for no icon:
  - The _icon_ for the Management Pack generated by this project. The Icon will be displayed in vRealize Operations Manager. The icon image must be 256x256 pixels in PNG format.
- Select a language for the adapter:
  - The mp-init tool will write a sample adapter in the selected _language_. Supported languages are:
  - Python
  - Java
  - Powershell

##  Output
The resulting project will have a ready test codebase for demonstration purposes. In order the further develop the management pack, consult the [adding content](adding_content.md) guide. For more information about the project structure based on its language, consult one of the guides below.
- [Python Project](python_project.md) TODO Complete python_project.md documentation
- [Powershell Project](powershell_project.md) TODO Complete powershell_project.md documentation
- [Java Project](java_project.md) TODO Complete java_project.md documentation

## Troubleshooting
### Setting log level

Set log level to debug to see a verbose output of the program:
For Linux and Mac Os
```sh
LOG_LEVEL=debug mp-init
```
For Windows
```
set LOG_LEVEL=debug
mp-init
```
For Windows, set the log level back to `info` after debugging.


### Docker images not found

The Dockerfile generated by the mp-init tool references the `harbor-repo.vmware.com/tvs/vrops-adapter-open-sdk-server`
, so it's important to have the image locally.

- _Building Images_ section in the docker [documentation](docker.md).
- _Pulling Images_ section in the docker [documentation](docker.md).

### SyntaxError: invalid syntax
The error below shows that the wrong version of Python is being used to run the mp-init tool.
```
  File "tools/setup/main.py", line 12
    def is_directory_or_not_existing(p: str):
                                      ^
SyntaxError: invalid syntax
```

Ensure the version of Python that runs the script in Python 3.3 or higher.
